# Pine Labs Quickstart Studio (Mock)

A self-explanatory, fast, and resilient playground to integrate Pine Labs Online payment flows without accessing the developer portal.

Quick start
- Publish from v0 to Vercel. Your live Playground will be at: https://YOUR-LIVE-DOMAIN/playground
- Create a payment (idempotent) and view stats at https://YOUR-LIVE-DOMAIN/dashboard
- Trigger signed webhooks to your endpoint using the Webhook Lab in the playground

Included
- Mock API:
  - POST /api/mock/payments (idempotent create; simulate: requires_action | timeout | duplicate)
  - GET /api/mock/payments/:id
  - GET /api/mock/payments (list + stats)
- Webhook Lab:
  - POST /api/mock/webhooks/trigger sends signed events to your URL
  - Header: X-PL-Signature  value: t=<ts>,v1=<hex>
  - Secret: whsec_test_123 (sample)
- Playground UI: /playground
- Dashboard: /dashboard
- CLI: /scripts/plol.mjs (`new`, `test`, `doctor`)
- OAuth (Mock):
  - Use client_credentials to obtain a mock bearer token (no portal access required):
    - Endpoint: `POST /api/mock/oauth/token`
    - Request body:
      \`\`\`json
      {
        "client_id": "844d40f0-81cf-4e87-9b89-9f1f35b8692e",
        "client_secret": "f420d050236741499ca5a529055b72e8",
        "grant_type": "client_credentials"
      }
      \`\`\`
    - Example cURL:
      \`\`\`
      curl -X POST https://YOUR-LIVE-DOMAIN/api/mock/oauth/token \
        -H "Content-Type: application/json" \
        -d '{"client_id":"844d40f0-81cf-4e87-9b89-9f1f35b8692e","client_secret":"f420d050236741499ca5a529055b72e8","grant_type":"client_credentials"}'
      \`\`\`
  - The mock issues a short-lived token shaped like `pl_test_*`. In real environments, swap to Pine Labs’ production OAuth base URL and real credentials.

## Webhook security (production guidance)

To ensure your integration is secure, configure your servers to accept webhooks only from the following Pine Labs IP range/address:

- IP range: `13.201.195.80/28`
- IP address: `13.200.147.61`

Also verify signatures:
- Header: `X-PL-Signature`
- Format: `t=<unix_ts>,v1=<hex_hmac>`
- Secret: `whsec_test_123` (mock)
- Sample Node verify snippet is shown in the Playground > Webhook Lab.

Note: The mock sender runs from your Vercel deployment and won’t originate from the above IPs. Use the IP allow-list only when receiving real production webhooks from Pine Labs.

Go live later
- Keep the same code paths; swap base URLs and real keys when you gain production access.
